<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.nuoyang.tech","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.12.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"default"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="Atticus Blog">
<meta property="og:url" content="https://blog.nuoyang.tech/page/2/index.html">
<meta property="og:site_name" content="Atticus Blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Atticus Lv">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://blog.nuoyang.tech/page/2/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/2/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Atticus Blog</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Atticus Blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Atticus Lv"
      src="/images/head.jpg">
  <p class="site-author-name" itemprop="name">Atticus Lv</p>
  <div class="site-description" itemprop="description"></div>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.nuoyang.tech/2020/08/08/hexo-writing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="Atticus Lv">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Atticus Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Atticus Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/08/hexo-writing/" class="post-title-link" itemprop="url">HEXO写作命令记录</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-08 17:51:06" itemprop="dateCreated datePublished" datetime="2020-08-08T17:51:06+08:00">2020-08-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-06-16 17:05:51" itemprop="dateModified" datetime="2022-06-16T17:05:51+08:00">2022-06-16</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="HEXO写作命令记录"><a href="#HEXO写作命令记录" class="headerlink" title="HEXO写作命令记录"></a>HEXO写作命令记录</h1><h2 id="Create-New-Post"><a href="#Create-New-Post" class="headerlink" title="Create New Post"></a>Create New Post</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo new &#x27;[post_name]&#x27;</span><br><span class="line">hexo n &#x27;[post_name]&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="Create-New-Page"><a href="#Create-New-Page" class="headerlink" title="Create New Page"></a>Create New Page</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo n page &#x27;&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="Define-Custom-Page-x2F-Post-Template"><a href="#Define-Custom-Page-x2F-Post-Template" class="headerlink" title="Define Custom Page&#x2F;Post Template"></a>Define Custom Page&#x2F;Post Template</h2><ol>
<li>Create a new markdown file in the root folder <strong>&#x2F;scaffolders</strong>, such as <strong>sprint.md</strong>.</li>
<li>Use blow commands</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo n sprint &#x27;[post_name]&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="Debug"><a href="#Debug" class="headerlink" title="Debug"></a>Debug</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure>

<h2 id="Generate-Static-Files"><a href="#Generate-Static-Files" class="headerlink" title="Generate Static Files"></a>Generate Static Files</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure>

<h2 id="Deploy-to-remote-server-x2F-git"><a href="#Deploy-to-remote-server-x2F-git" class="headerlink" title="Deploy to remote server&#x2F;git"></a>Deploy to remote server&#x2F;git</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure>

<h2 id="Insert-a-picture"><a href="#Insert-a-picture" class="headerlink" title="Insert a picture"></a>Insert a picture</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![picture&#x27;s name](picture&#x27;s relative path)</span><br></pre></td></tr></table></figure>

<h2 id="Insert-a-Read-More"><a href="#Insert-a-Read-More" class="headerlink" title="Insert a Read More"></a>Insert a Read More</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- more --&gt;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.nuoyang.tech/2017/06/12/backup-2017-06-12-ten-commandments-of-egoless-programming/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="Atticus Lv">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Atticus Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Atticus Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/06/12/backup-2017-06-12-ten-commandments-of-egoless-programming/" class="post-title-link" itemprop="url">10 Commandments of Egoless Programming</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-06-12 15:43:31" itemprop="dateCreated datePublished" datetime="2017-06-12T15:43:31+08:00">2017-06-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-06-16 17:05:51" itemprop="dateModified" datetime="2022-06-16T17:05:51+08:00">2022-06-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%AF%BB%E5%90%8E%E6%84%9F/" itemprop="url" rel="index"><span itemprop="name">读后感</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>最近在InfoQ上读到了篇文章<a target="_blank" rel="noopener" href="http://www.infoq.com/cn/news/2017/06/10-Commandments-without-program">无我编程的十条戒律</a>，记录一下这十条诫律。</p>
<ol>
<li><p><strong>Understand and accept that you will make mistakes.</strong> The point is to find them early, before they make it into production. Fortunately, except for the few of us developing rocket guidance software at JPL, mistakes are rarely fatal in our industry, so we can, and should, learn, laugh, and move on.</p>
</li>
<li><p><strong>You are not your code.</strong> Remember that the entire point of a review is to find problems, and problems will be found. Don’t take it personally when one is uncovered.</p>
</li>
<li><p><strong>No matter how much “karate” you know, someone else will always know more.</strong> Such an individual can teach you some new moves if you ask. Seek and accept input from others, especially when you think it’s not needed.</p>
</li>
<li><p><strong>Don’t rewrite code without consultation.</strong> There’s a fine line between “fixing code” and “rewriting code.” Know the difference, and pursue stylistic changes within the framework of a code review, not as a lone enforcer.</p>
</li>
<li><p><strong>Treat people who know less than you with respect, deference, and patience.</strong> Nontechnical people who deal with developers on a regular basis almost universally hold the opinion that we are prima donnas at best and crybabies at worst. Don’t reinforce this stereotype with anger and impatience.</p>
</li>
<li><p><strong>The only constant in the world is change.</strong> Be open to it and accept it with a smile. Look at each change to your requirements, platform, or tool as a new challenge, not as some serious inconvenience to be fought.</p>
</li>
<li><p><strong>The only true authority stems from knowledge, not from position.</strong> Knowledge engenders authority, and authority engenders respect – so if you want respect in an egoless environment, cultivate knowledge.</p>
</li>
<li><p><strong>Fight for what you believe, but gracefully accept defeat.</strong> Understand that sometimes your ideas will be overruled. Even if you do turn out to be right, don’t take revenge or say, “I told you so” more than a few times at most, and don’t make your dearly departed idea a martyr or rallying cry.</p>
</li>
<li><p><strong>Don’t be “the guy in the room.”</strong> Don’t be the guy coding in the dark office emerging only to buy cola. The guy in the room is out of touch, out of sight, and out of control and has no place in an open, collaborative environment.</p>
</li>
<li><p><strong>Critique code instead of people – be kind to the coder, not to the code.</strong> As much as possible, make all of your comments positive and oriented to improving the code. Relate comments to local standards, program specs, increased performance, etc.</p>
</li>
</ol>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ol>
<li><a target="_blank" rel="noopener" href="https://blog.codinghorror.com/the-ten-commandments-of-egoless-programming/">The Ten Commandments of Egoless Programming</a></li>
<li><a target="_blank" rel="noopener" href="http://www.infoq.com/cn/news/2017/06/10-Commandments-without-program">无我编程的十条戒律</a></li>
<li><a target="_blank" rel="noopener" href="https://www.amazon.com/exec/obidos/ASIN/0932633420/codihorr-20">The Psychology of Computer Programming</a> - Jerry Weinberg</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.nuoyang.tech/2017/05/18/backup-2017-05-18-aliyun-linux-quick-api/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="Atticus Lv">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Atticus Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Atticus Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/05/18/backup-2017-05-18-aliyun-linux-quick-api/" class="post-title-link" itemprop="url">阿里云快速搭建公网ip访问api</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-05-18 11:38:04" itemprop="dateCreated datePublished" datetime="2017-05-18T11:38:04+08:00">2017-05-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-06-19 17:12:49" itemprop="dateModified" datetime="2022-06-19T17:12:49+08:00">2022-06-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF%E8%B5%84%E6%96%99/" itemprop="url" rel="index"><span itemprop="name">技术资料</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>最近抢到了阿里云的6个月试用，于是想自己搭个服务器和数据库，弄个小网站出来，自己也是各种坑踩过来，公网私网映射，配置云安全组规则，也是花了小半天才弄明白这些过程，记录下：</p>
<h1 id="搭建公网ip访问api"><a href="#搭建公网ip访问api" class="headerlink" title="搭建公网ip访问api"></a>搭建公网ip访问api</h1><h2 id="准备阶段"><a href="#准备阶段" class="headerlink" title="准备阶段"></a>准备阶段</h2><h3 id="要运行的jar包服务"><a href="#要运行的jar包服务" class="headerlink" title="要运行的jar包服务"></a>要运行的jar包服务</h3><p>首先要先准备好一个可执行的jar包，我准备好了自己一个 <strong>jwt token</strong> 相关的服务，跑在4006端口上，具体请求的方法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">URL: 公网ip:4006/decodetoken</span><br><span class="line">Method: POST</span><br><span class="line">Header: Content-Type:application/json</span><br><span class="line">Body: &#123;&quot;token&quot;:&quot;testing&quot;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="EC服务器"><a href="#EC服务器" class="headerlink" title="EC服务器"></a>EC服务器</h3><p>我用的是阿里云免费试用的实例规格<code>ecs.xn4.small</code>，这里将隐私部分拿<code>xx</code>和<code>yy</code>代替了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">配置</span><br><span class="line">CPU： 1核</span><br><span class="line">内存： 1GB</span><br><span class="line">操作系统： Ubuntu 14.04 64位</span><br><span class="line">公网ip： xx.xx.xxx.xxx</span><br><span class="line">私有ip： yy.yy.yyy.yyy</span><br><span class="line">带宽： 1Mbps</span><br></pre></td></tr></table></figure>
<h3 id="安装java"><a href="#安装java" class="headerlink" title="安装java"></a>安装java</h3><p>具体可以参考<a target="_blank" rel="noopener" href="https://www.linuxdashen.com/ubuntu%E5%AE%89%E8%A3%85oracle-java8%E4%BB%A5%E5%8F%8A%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E7%9A%84%E6%AD%A3%E7%A1%AE%E8%AE%BE%E7%BD%AE%E6%96%B9%E6%B3%95">Ubuntu安装Oracle Java8以及环境变量的正确设置方法</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:webupd8team/java</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install oracle-java8-installer</span><br></pre></td></tr></table></figure>
<p>安装过程中会弹出一个Oracle的使用条款，选择yes就可以，安装完后可以运行<code>java -version</code>来检查版本</p>
<h2 id="运行jar服务"><a href="#运行jar服务" class="headerlink" title="运行jar服务"></a>运行jar服务</h2><p>可以使用<code>nohup</code>+<code>&amp;</code>在后台运行服务，同时会生成一个名字为<code>nohup.out</code>的文件会记录下服务运行日志，具体命令为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup java -jar jwt.jar &amp;</span><br></pre></td></tr></table></figure>
<p>我们可以用<code>jobs</code>命令来查看有哪些进程在运行，这个时候我们可以通过<code>curl</code>命令来测试api是否工作正常</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl yy.yy.yyy.yyy:4006/decodetoken -X POST -i -H &quot;Content-Type:application/json&quot; -d &#x27;&#123;&quot;token&quot;:&quot;testing&quot;&#125;&#x27;</span><br></pre></td></tr></table></figure>
<h2 id="公网ip和内网ip映射"><a href="#公网ip和内网ip映射" class="headerlink" title="公网ip和内网ip映射"></a>公网ip和内网ip映射</h2><p>这一步我研究了一个晚上才明白，主要使用命令<code>iptables</code>参考教程<a target="_blank" rel="noopener" href="http://blog.csdn.net/gyy823/article/details/45153711">linux外网服务器跳转内网服务器实现内网访问（iptables）</a></p>
<h3 id="配置filter选项，使得ip和port都可以通过防火墙"><a href="#配置filter选项，使得ip和port都可以通过防火墙" class="headerlink" title="配置filter选项，使得ip和port都可以通过防火墙"></a>配置filter选项，使得ip和port都可以通过防火墙</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptables -t filter -A INPUT -p tcp --dport 4006 -j ACCEPT</span><br><span class="line">iptables -t filter -A OUTPUT -p tcp --sport 4006 -j ACCEPT</span><br></pre></td></tr></table></figure>
<h3 id="配置nat转发规则选项"><a href="#配置nat转发规则选项" class="headerlink" title="配置nat转发规则选项"></a>配置nat转发规则选项</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -t nat -A PREROUTING -d 公网ip -p tcp --dport 4006 -j DNAT --to-destination 私网ip:4006</span><br></pre></td></tr></table></figure>
<h3 id="保存iptables配置"><a href="#保存iptables配置" class="headerlink" title="保存iptables配置"></a>保存iptables配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables-save</span><br></pre></td></tr></table></figure>
<h3 id="保存和调用iptables配置"><a href="#保存和调用iptables配置" class="headerlink" title="保存和调用iptables配置"></a>保存和调用iptables配置</h3><p>iptables在系统退出的时候，设置都将不存在，需要手动去保存一下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables-save &gt;/etc/iptables.rules</span><br></pre></td></tr></table></figure>
<p>调用iptables设置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables-restore &gt;/etc/iptables.rules</span><br></pre></td></tr></table></figure>
<p>我们可以把它设置成关机开机自动配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/network/interfaces</span><br></pre></td></tr></table></figure>
<p>在最后添加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pre-up iptables-restore &gt;/etc/iptables.rules //开机时自动调用已经存在的iptables设置</span><br><span class="line">post-down iptables-save &gt;/etc/iptables.rules //关机时自动保存当前的iptables设置</span><br></pre></td></tr></table></figure>
<p>另外一种保存方法是利用 <strong>iptables-persistent</strong><br><strong>Ubuntu 14.04</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo invoke-rc.d iptables-persistent save</span><br><span class="line">sudo invoke-rc.d iptables-persistent reload</span><br></pre></td></tr></table></figure>
<p><strong>Ubuntu 16.04</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo netfilter-persistent save</span><br><span class="line">sudo netfilter-persistent reload</span><br></pre></td></tr></table></figure>
<h2 id="阿里云安全组规则"><a href="#阿里云安全组规则" class="headerlink" title="阿里云安全组规则"></a>阿里云安全组规则</h2><p>这步当时弄了一上午才明白咋回事，在配置上述映射后，关键一步要在阿里云安全组规则里把相应的端口加上</p>
<img src="/2017/05/18/backup-2017-05-18-aliyun-linux-quick-api/anquan.png" class="" title="ruleOfSecurity">
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>这时我们就可以在公网测试api是否能通啦，这里我用的postman，也有很多其他的在线测试工具</p>
<img src="/2017/05/18/backup-2017-05-18-aliyun-linux-quick-api/token.png" class="" title="test">
<h1 id="Linux那些命令行"><a href="#Linux那些命令行" class="headerlink" title="Linux那些命令行"></a>Linux那些命令行</h1><h2 id="重启"><a href="#重启" class="headerlink" title="重启"></a>重启</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure>
<h2 id="查看系统资源占用"><a href="#查看系统资源占用" class="headerlink" title="查看系统资源占用"></a>查看系统资源占用</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">top</span><br><span class="line">free</span><br></pre></td></tr></table></figure>
<h2 id="查看内网ip"><a href="#查看内网ip" class="headerlink" title="查看内网ip"></a>查看内网ip</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig</span><br></pre></td></tr></table></figure>
<h2 id="查看进程"><a href="#查看进程" class="headerlink" title="查看进程"></a>查看进程</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps</span><br></pre></td></tr></table></figure>
<h2 id="查看磁盘使用"><a href="#查看磁盘使用" class="headerlink" title="查看磁盘使用"></a>查看磁盘使用</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 以Mb为单位</span><br><span class="line">df -m</span><br></pre></td></tr></table></figure>
<h2 id="创建目录"><a href="#创建目录" class="headerlink" title="创建目录"></a>创建目录</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir 目录名</span><br></pre></td></tr></table></figure>
<h2 id="安装软件"><a href="#安装软件" class="headerlink" title="安装软件"></a>安装软件</h2><p>目前我只了解apt方式，欢迎各路豪杰来补充</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"># 只要可以上网，可以用apt-cache search来查找</span><br><span class="line">apt-cache search software-name</span><br><span class="line"># apt-get</span><br><span class="line">## 安装一个新的软件包</span><br><span class="line">apt-get install packagename</span><br><span class="line">## 卸载一个已安装的软件包(保留配置文件)</span><br><span class="line">apt-get remove packagename</span><br><span class="line">## 卸载一个已安装的软件包(删除配置文件)</span><br><span class="line">apt-get --purge remove packagename</span><br><span class="line">## 删除已经删掉的软件</span><br><span class="line">apt-get autoremove——因为apt会把已装或已卸的软件都备份在硬盘上，所以如果需要空间的话，可以让这个命令来删除你已经删掉的软件。</span><br><span class="line">## 清楚已卸载软件包的deb文件</span><br><span class="line">apt-get autoclean——定期运行这个命令来清除那些已经卸载的软件包的.deb文件。通过这种方式，可以释放大量的磁盘空间。如果需求十分迫切，可以使用apt-get clean以释放更多空间。这个命令会将已安装软件包裹的.deb文件一并删除。</span><br><span class="line">## 清楚安装软件备份</span><br><span class="line">apt-get clean——这个命令会把安装的软件的备份也删除，不过这样不会影响软件的使用的。</span><br><span class="line">## 更新所有已安装的软件包</span><br><span class="line">apt-get upgrade</span><br><span class="line">## 将系统升级到新版本</span><br><span class="line">apt-get dist-upgrade</span><br><span class="line">## 在软件包列表中搜索字符串</span><br><span class="line">apt-cache search string</span><br><span class="line">## 显示软件包信息</span><br><span class="line">apt-cache showpkg pkgs</span><br><span class="line">## 查看库里有多少软件</span><br><span class="line">apt-cache stats</span><br><span class="line">## 打印可用软件包列表</span><br><span class="line">apt-cache dumpavail</span><br><span class="line">## 显示软件包记录，类似于dpkg –print-avail</span><br><span class="line">apt-cache show pkgs</span><br><span class="line">## 打印软件包列表中所有软件包的名称</span><br><span class="line">apt-cache pkgnames</span><br></pre></td></tr></table></figure>
<h2 id="iptables"><a href="#iptables" class="headerlink" title="iptables"></a>iptables</h2><p>查看iptables配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -L -n</span><br></pre></td></tr></table></figure>
<p>iptables是直接配置就会生效，重启后会丢失，保存命令为<code>iptables-save</code>，恢复默认为<code>iptables-restore</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"># 清除原有规则</span><br><span class="line">iptables -F</span><br><span class="line">iptables -X</span><br><span class="line"></span><br><span class="line"># 设定预设规则</span><br><span class="line">iptables -P INPUT DROP</span><br><span class="line">iptables -P OUTPUT DROP</span><br><span class="line">iptables -P FORWARD DROP</span><br><span class="line"></span><br><span class="line"># 添加规则</span><br><span class="line"># 留给ssh用的22端口</span><br><span class="line">iptables -A INPUT -p tcp --dport 22 -j ACCEPT</span><br><span class="line">iptables -A OUTPUT -p tcp --sport 22 -j ACCEPT</span><br><span class="line"></span><br><span class="line"># 设置允许ping</span><br><span class="line">iptables -A INPUT -p icmp -j ACCEPT</span><br><span class="line">iptables -A OUTPUT -p icmp -j ACCEPT</span><br><span class="line"></span><br><span class="line"># 教程上说是允许loopback，不然会导致DNS无法正常关闭等问题</span><br><span class="line">iptables -A INPUT -i lo -p all -j ACCEPT</span><br><span class="line">iptables -A OUTPUT -o lo -p all -j ACCEPT</span><br><span class="line"></span><br><span class="line"># 教程上说是丢弃坏的TCP包</span><br><span class="line">iptables -A FORWARD -p TCP ! --syn -m state --state NEW -j DROP</span><br><span class="line"></span><br><span class="line"># 教程上说处理IP碎片数量,防止攻击,允许每秒100个</span><br><span class="line">iptables -A FORWARD -f -m limit --limit 100/s --limit-burst 100 -j ACCEPT</span><br><span class="line"></span><br><span class="line"># 教程上说设置ICMP包过滤,允许每秒1个包,限制触发条件是10个包</span><br><span class="line">iptables -A FORWARD -p icmp -m limit --limit 1/s --limit-burst 10 -j ACCEPT</span><br><span class="line"></span><br><span class="line"># 如果访问转接慢，可以配置</span><br><span class="line">iptables -t filter -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT</span><br><span class="line">iptables -t filter -A OUTPUT -m state --state ESTABLISHED,RELATED -j ACCEPT</span><br><span class="line">iptables -t nat -A PREROUTING -m state --state ESTABLISHED,RELATED -j ACCEPT</span><br><span class="line">iptables -t nat -A POSTROUTING -m state --state ESTABLISHED,RELATED -j ACCEPT</span><br></pre></td></tr></table></figure>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ol>
<li><a target="_blank" rel="noopener" href="https://fukun.org/archives/02201800.html">Ubuntu 使用top&#x2F;free查看内存占用大的原因</a></li>
<li><a target="_blank" rel="noopener" href="https://www.deamwork.com/archives/ubuntu-iptables-conn.orz6">吐槽-UbuntuServer用iptables麻烦+如何启动与停止</a></li>
<li><a target="_blank" rel="noopener" href="http://xstarcd.github.io/wiki/Linux/iptables_forward_internetshare.html">通过iptables实现端口转发和内网共享上网</a></li>
<li><a target="_blank" rel="noopener" href="http://bbs.chinaunix.net/thread-4069594-1-1.html">更改了iptables后，无法访问外网</a></li>
<li><a target="_blank" rel="noopener" href="http://blog.csdn.net/gyy823/article/details/45153711">linux外网服务器跳转内网服务器实现内网访问（iptables）</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.nuoyang.tech/2017/05/16/backup-2017-05-16-hexo-command/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="Atticus Lv">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Atticus Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Atticus Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/05/16/backup-2017-05-16-hexo-command/" class="post-title-link" itemprop="url">Hexo编辑博客时要用到的命令</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-05-16 11:00:12" itemprop="dateCreated datePublished" datetime="2017-05-16T11:00:12+08:00">2017-05-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-06-16 17:05:51" itemprop="dateModified" datetime="2022-06-16T17:05:51+08:00">2022-06-16</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>记录下在博客中要经常用的hexo相关的tag和命令</p>
<h1 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h1><h2 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% asset_img issue3.png issue3 %&#125;</span><br></pre></td></tr></table></figure>
<h2 id="公式"><a href="#公式" class="headerlink" title="公式"></a>公式</h2><p>$2^{i-1}$</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$2^&#123;i-1&#125;$</span><br></pre></td></tr></table></figure>
<h2 id="kdb标签"><a href="#kdb标签" class="headerlink" title="kdb标签"></a>kdb标签</h2><p>引入hexo-tag-kbd</p>
<kbd style="border:1px solid gray;font-size:1.2em;box-shadow:1px 0 1px 0 #eee, 0 2px 0 2px #ccc, 0 2px 0 3px #444;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;margin:2px 3px;padding:1px 5px;">Ctrl</kbd>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% kbd Ctrl %&#125;</span><br></pre></td></tr></table></figure>
<h2 id="文章链接"><a href="#文章链接" class="headerlink" title="文章链接"></a>文章链接</h2><a href="#">Post not found: Micro-Services 微服务学习</a>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% post_link Micro-Services 微服务学习 %&#125;</span><br></pre></td></tr></table></figure>
<h1 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h1><h2 id="新建文章"><a href="#新建文章" class="headerlink" title="新建文章"></a>新建文章</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new post &quot;title&quot;</span><br></pre></td></tr></table></figure>
<h2 id="清理历史静态文件"><a href="#清理历史静态文件" class="headerlink" title="清理历史静态文件"></a>清理历史静态文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br></pre></td></tr></table></figure>
<h2 id="生成静态文件"><a href="#生成静态文件" class="headerlink" title="生成静态文件"></a>生成静态文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br></pre></td></tr></table></figure>
<h2 id="本地启动服务查看"><a href="#本地启动服务查看" class="headerlink" title="本地启动服务查看"></a>本地启动服务查看</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure>
<h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure>
<h2 id="新建新页面"><a href="#新建新页面" class="headerlink" title="新建新页面"></a>新建新页面</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page &quot;title&quot;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.nuoyang.tech/2017/05/08/backup-2017-05-08-software-architecture/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="Atticus Lv">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Atticus Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Atticus Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/05/08/backup-2017-05-08-software-architecture/" class="post-title-link" itemprop="url">那些关于“架构”的七七八八</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-05-08 10:49:10" itemprop="dateCreated datePublished" datetime="2017-05-08T10:49:10+08:00">2017-05-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-06-19 17:12:49" itemprop="dateModified" datetime="2022-06-19T17:12:49+08:00">2022-06-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF%E8%B5%84%E6%96%99/" itemprop="url" rel="index"><span itemprop="name">技术资料</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>最开始听说到架构师这个词，估计还是在美剧 <strong>How I met your Mother</strong> 听到的，那时只觉得做建筑的人才会有 <strong>架构师</strong> 这么个称号，后来和同学交流得知，这个词在互联网领域很常见。<br>作为初入互联网的小白，收集些关于架构师的知识点，定期进行总结和复习，也为将来的工作做打算。<br>这里说不上技术多高精尖，更多的是需要耐心和时间，这篇文章会长期更新，也欢迎各路大神批评指正，感谢。</p>
<h1 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h1><p>具体架构师是个什么东东，我没找到什么官方的定义，在<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E5%B8%88">Wiki</a>上有看到下面的定义：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">系统架构师（System Architect，簡稱SA或SAr），是在信息系统研发中，负责依据需求来确定主要的技术选择、设计系统的主体框架结构，并负责搭建实施的人。他们（与系统分析师共同）确立系统的主体架构和实现方向，并负责指导软件工程师等开发人员的编码开发工作。</span><br></pre></td></tr></table></figure>
<p>简而言之，架构是根据业务需求所指定的合理且可落地的技术规范。架构师，听起来就很高大上，各种引领团队方向，指导开发工作。可是要成为一个合格的架构师，首先必须是一名合格的编码人员，在各种吸星大法吸收了各路技术理念与框架后，达到一个比较牛XX能力时，能在整个项目里 <strong>定义规范</strong> 与 <strong>指导落地</strong>。</p>
<h2 id="架构的演进历史"><a href="#架构的演进历史" class="headerlink" title="架构的演进历史"></a>架构的演进历史</h2><ul>
<li>没有架构</li>
<li>水平分层架构(单块架构)</li>
<li>分布式架构</li>
<li>面向服务架构(SOA)</li>
<li>前后端分离架构</li>
<li>微服务架构<br>微服务架构的一些理解可以参考以前的日志<a href="#">Post not found: Micro-Services 微服务学习</a></li>
</ul>
<h1 id="到处拾到的知识点"><a href="#到处拾到的知识点" class="headerlink" title="到处拾到的知识点!"></a>到处拾到的知识点!</h1><h2 id="关于架构优化的一些问题收集"><a href="#关于架构优化的一些问题收集" class="headerlink" title="关于架构优化的一些问题收集"></a>关于架构优化的一些问题收集</h2><p><a target="_blank" rel="noopener" href="https://my.oschina.net/u/2260265/blog/501289">《大型网站技术架构》网站的高性能架构及优化</a></p>
<h3 id="web前端优化"><a href="#web前端优化" class="headerlink" title="web前端优化"></a>web前端优化</h3><p>减少http请求数，利用keep-alive进行连接复用<br>使用反向代理，CDN服务对资源进行缓存<br>在客户端缓存资源<br>传输压缩过的内容，比如nginx中的gzip功能</p>
<h3 id="应用服务器优化"><a href="#应用服务器优化" class="headerlink" title="应用服务器优化"></a>应用服务器优化</h3><p>合理使用缓存<br>异步操作，使用消息队列进行削峰<br>利用负载均衡配置集群<br>代码优化（使用多线程，创建无状态对象，局部对象，并发访问资源使用锁，资源复用，灵活组合各种数据结构，利用垃圾回收机制）</p>
<h3 id="大数据存储方面，mysql本身有瓶颈，一般会进行什么样的优化？"><a href="#大数据存储方面，mysql本身有瓶颈，一般会进行什么样的优化？" class="headerlink" title="大数据存储方面，mysql本身有瓶颈，一般会进行什么样的优化？"></a>大数据存储方面，mysql本身有瓶颈，一般会进行什么样的优化？</h3><p>数据库读写分离，利用缓存减少对数据库读写的压力，可以利用主从数据库进行热备份，对数据库进行分库或业务拆分</p>
<h3 id="缓存相关的"><a href="#缓存相关的" class="headerlink" title="缓存相关的"></a>缓存相关的</h3><p>缓存的本质是一个内存hash表，存着key-value值<br>网络访问遵循二八定律，80%的访问20%的数据<br>要合理使用缓存要考虑：</p>
<ol>
<li>避免频繁修改缓存数据</li>
<li>避免没有热点的访问</li>
<li>要考虑数据不一致和脏读（缓存数据一般都有失效时间）</li>
<li>缓存可用性，考虑分布式缓存</li>
<li>缓存穿透，要考虑恶意攻击某个不存在的业务，比如可以考虑把null空值缓存<br>分布式缓存架构可以考虑JBoss，MemCached，Redis等</li>
</ol>
<h4 id="redis和memcahced区别"><a href="#redis和memcahced区别" class="headerlink" title="redis和memcahced区别"></a>redis和memcahced区别</h4><ul>
<li>redis除了支持key-value数据类型，还可以提供list，set，sorted set，hash等数据结构的存储</li>
<li>redis支持数据的备份，即master-slave模式的数据备份</li>
<li>redis支持数据的持久化，可以将内存中的数据保持在磁盘中，重启时可以再次加载</li>
</ul>
<p><strong>网络IO模型</strong><br>Memcached是多线程，非阻塞IO复用的网络模型<br>Redis使用单线程的IO复用模型<br><strong>内存管理方面</strong><br>Memcached使用预分配的内存池的方式，会带来一定程度空间浪费<br>Redis使用现场申请内存的方式来存储数据，会存在一定的内存碎片<br><strong>数据一致性问题</strong><br>Memcached提供cas命令，可以保证多个并发访问操作同一份数据的一致性问题。<br>Redis没有cas命令，不能保证，但是Redis提供了事务的功能，可以保证一串命令的原子性，中间不会被任何操作打断<br><strong>存储方式及其他方面</strong><br>Memcached基本只支持key-value存储<br>Redis除了key-value外，还支持list，set，sorted 等数据结构</p>
<h3 id="数据库优化，主要进行拆分，什么是水平拆分？什么是垂直拆分？优缺点？"><a href="#数据库优化，主要进行拆分，什么是水平拆分？什么是垂直拆分？优缺点？" class="headerlink" title="数据库优化，主要进行拆分，什么是水平拆分？什么是垂直拆分？优缺点？"></a>数据库优化，主要进行拆分，什么是水平拆分？什么是垂直拆分？优缺点？</h3><ol>
<li>优化SQL和索引</li>
<li>加缓存，比如memcached和redis</li>
<li>主从复制，读写分离，可以在应用层做</li>
<li>用mysql自带分区表</li>
<li>垂直拆分，根据模块的耦合度，将一个大的系统分为多个小系统，也就是分布式系统</li>
<li>水平拆分，针对数据量大的表，先选择一个合理的sharding key，为了有好的查询效率，表的结构也要改动，做一定的冗余，sql中尽量带sharding key，将数据定位到限定的表上去查，而不是扫描全部的表</li>
</ol>
<p><strong>垂直拆分</strong><br>是指按功能模块拆分，也可以是列拆分。比如分为订单库、商品库、用户库。。。用这种方式多个数据库之间的表结构不同。<br>垂直拆分是实现比较简单，根据表名访问不同的数据库就可以<br>优点：<br>拆分后业务清晰，拆分明确，系统之间整合或扩展容易，数据维护简单<br>缺点：<br>部分业务无法join，只能通过接口方式解决，提高了复杂度，存在单库性能瓶颈，事务处理复杂<br><strong>水平拆分</strong><br>将同一个表的数据进行分块保存到不同的数据库中，这些数据库中的表结构完全相同。<br>水平拆分比较复杂，有几种前人总结的拆分规则：</p>
<ol>
<li>顺序拆分：比如可以按照订单的日期按年份来分，这样做优点是可以部分拆分，缺点是数据分布明显不均匀</li>
<li>hash取模分：比如对user_id进行hash，然后用一个特定的数字，比如要切分4个数据库，我们就可以选4，对user_id的hash值进行取模。优点是数据分布均匀，缺点是数据迁移时候麻烦，不能按照机器性能分摊数据<br>优点：<br>不存在单库大数据情况和高并发瓶颈，提高了系统的稳定性跟负载能力<br>缺点：<br>拆分规则难以抽象，分片事务一致性难以解决，数据多次扩展难度跟维护量较大，跨库join性能较差</li>
</ol>
<h3 id="数据库分片大概原理"><a href="#数据库分片大概原理" class="headerlink" title="数据库分片大概原理"></a>数据库分片大概原理</h3><p>Sharding与数据库分区（Partition）的区别</p>
<h3 id="服务器方面的优化"><a href="#服务器方面的优化" class="headerlink" title="服务器方面的优化"></a>服务器方面的优化</h3><p>可以考虑负载均衡，资源静态化，分布式集群能异步的就异步处理，后面再加消息队列</p>
<h3 id="分布式系统的一致性问题（大白话的讲？）？主从同步的延迟如何解决，容灾如何处理？"><a href="#分布式系统的一致性问题（大白话的讲？）？主从同步的延迟如何解决，容灾如何处理？" class="headerlink" title="分布式系统的一致性问题（大白话的讲？）？主从同步的延迟如何解决，容灾如何处理？"></a>分布式系统的一致性问题（大白话的讲？）？主从同步的延迟如何解决，容灾如何处理？</h3><p><a target="_blank" rel="noopener" href="https://waylau.com/talk-about-distributed-system/">大白话讲分布式系统</a><br>好的架构应该考虑不同等级的容灾。集群容灾，在集群中某一个服务节点崩溃的情况下，集群中另外一台主机能够接替马上接替他的工作，并且故障节点能够脱离；分布式容灾：分布式系统一般会假设整个系统中随时都在发生单点故障&#x2F;多点故障，当产生单点故障&#x2F;多点故障时，整个分布式系统都还可以正常对外提供服务，并且分布式系统中的单点故障&#x2F;多点故障区可以通过自动&#x2F;人工的方式进行恢复，分布式系统会重新接纳它们；异地容灾（机房等级容灾）：在机房产生物理灾难的情况下（物理网络断裂、战争摧毁、地震等），在某个相隔较远的异地，备份系统能够发现这样的灾难发生，并主动接过系统运行权，通知系统运维人员（根据系统不同的运行要求，可能还有多个备份系统）。异地容灾最大的挑战性是如何保证异地数据的完整性。</p>
<h4 id="主从同步延迟问题的解决方案"><a href="#主从同步延迟问题的解决方案" class="headerlink" title="主从同步延迟问题的解决方案"></a>主从同步延迟问题的解决方案</h4><p>MySQL的主从同步<br>Slaver上有一个IO线程负责从Master取bin-log写到本地，另外有一个SQL线程负责执行这些本地日志relay-log实现命令重放。但是SQL线程只有一个，更新速度跟不上，就会造成主从同步延迟。</p>
<ol>
<li>读写分离，利用mySQL搭多个transfer</li>
<li>利用MySql Proxy实现读写分离，然后在Master上增加一个自增表，这个表仅含有一个字段，当Master接收到任何数据更新的请求时，均会触发这个触发器，更新自增表中的记录。</li>
</ol>
<h3 id="灰度发布流程和原理？灰度发布可以解决什么问题，怎么构建完善的灰度发布体系？"><a href="#灰度发布流程和原理？灰度发布可以解决什么问题，怎么构建完善的灰度发布体系？" class="headerlink" title="灰度发布流程和原理？灰度发布可以解决什么问题，怎么构建完善的灰度发布体系？"></a>灰度发布流程和原理？灰度发布可以解决什么问题，怎么构建完善的灰度发布体系？</h3><p><strong>灰度发布</strong> 是指在黑白之间，能够平滑过渡的一种发布方式。AB test就是一种灰度发布方式，让一部分用户继续用A，一部分用户开始用B，如果用户对B没有什么反对意见，那么逐步扩大范围，把所有用户都迁移到B上面来。这期间，通过手机这部分用户对新版本应用的显示反馈（论坛啊微博啥的）或者是隐式反馈（应用自身统计数据），对新版本应用的功能、性能、稳定性等指标进行评判，进而决定继续放大新版本投放范围直至全量升级或回滚至老版本。<br><strong>具体流程</strong><br>需求评审 - 建立试验方案 - 新功能开发 - 灰度发布 - 小流量AB测试 - 发布成功的功能，同时关闭失败的。<br><strong>灰度发布需要考虑的一些要素</strong></p>
<ul>
<li>用户标识： IP，Cookie</li>
<li>目标用户选取策略，比如地理位置、用户终端特性（分辨率、性能）、用户自身特点（年龄，性别等），对于客户端应用，可以考虑让用户自主选择采用哪些版本</li>
<li>数据反馈，比如客户端性能、客户端稳定性、使用次数、使用频率</li>
<li>新版本公关运营支持，及时处理用户的显示反馈<br>关于灰度测试相关可以参考<a target="_blank" rel="noopener" href="http://www.jianshu.com/p/88f206f48278">灰度发布和A&#x2F;B test</a></li>
</ul>
<h3 id="架构能力方面，如何进行业务分层，代码模块化？"><a href="#架构能力方面，如何进行业务分层，代码模块化？" class="headerlink" title="架构能力方面，如何进行业务分层，代码模块化？"></a>架构能力方面，如何进行业务分层，代码模块化？</h3><h3 id="服务器的健康度，zabbix监控服务器，ZooKeeper监控软件"><a href="#服务器的健康度，zabbix监控服务器，ZooKeeper监控软件" class="headerlink" title="服务器的健康度，zabbix监控服务器，ZooKeeper监控软件"></a>服务器的健康度，zabbix监控服务器，ZooKeeper监控软件</h3><h3 id="企业统计一般会统计哪些数据？通过统计一般可以找到哪些问题？可能的网络问题，业务上线问题？"><a href="#企业统计一般会统计哪些数据？通过统计一般可以找到哪些问题？可能的网络问题，业务上线问题？" class="headerlink" title="企业统计一般会统计哪些数据？通过统计一般可以找到哪些问题？可能的网络问题，业务上线问题？"></a>企业统计一般会统计哪些数据？通过统计一般可以找到哪些问题？可能的网络问题，业务上线问题？</h3><h3 id="网络安全，对外提供服务，要考虑一定的安全防护，对于sql注入，SSRF漏洞等常见漏洞"><a href="#网络安全，对外提供服务，要考虑一定的安全防护，对于sql注入，SSRF漏洞等常见漏洞" class="headerlink" title="网络安全，对外提供服务，要考虑一定的安全防护，对于sql注入，SSRF漏洞等常见漏洞"></a>网络安全，对外提供服务，要考虑一定的安全防护，对于sql注入，SSRF漏洞等常见漏洞</h3><p><strong>sql注入</strong></p>
<ol>
<li>严格限制Web应用的数据库操作权限，限制用户权限</li>
<li>检查输入数据是否具有所期望的数据格式，严格限制变量的类型</li>
<li>对进入数据库的特殊字符进行转移处理或编码处理</li>
<li>所有查询语句建议使用数据库提供的参数化查询接口</li>
<li>正式发布前建议使用专业的SQL注入检测工具进行检测</li>
<li>避免网站打印出SQL错误信息<br><strong>SSRF漏洞</strong><br>SSRF是一种由攻击者构造形成由服务端发起请求的一个安全漏洞，一般情况下，SSRF攻击的目标是从外网无法访问的内部系统。利用一个可以发起网络请求的服务，当作跳板来攻击其他服务。</li>
<li>可以通过抓包分析发送的请求是否是由服务器的发送来判断是否存在SSRF漏洞</li>
<li>在页面源码中查找访问的资源地址，比如<code>www.xxx.com/a.php?image=xxx</code>就可能存在SSRF漏洞。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">如何防御SSRF</span><br><span class="line">1. 过滤返回信息，验证远程服务器对请求的响应</span><br><span class="line">2. 统一错误信息，避免用户可以根据错误信息来判断远程服务器的端口状态</span><br><span class="line">3. 限制请求的端口为http常用的端口，比如，80，443，8080，8090</span><br><span class="line">4. 黑名单内网ip，避免应用被用来获取内网数据，攻击内网</span><br><span class="line">5. 禁用不需要的协议，仅允许http和https请求</span><br><span class="line">6. 使用正则对参数进行校验，防止畸形请求绕过黑名单</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="业务回滚的场景和实现"><a href="#业务回滚的场景和实现" class="headerlink" title="业务回滚的场景和实现"></a>业务回滚的场景和实现</h3><p>在复杂的业务中，要分步处理多个小的业务。一旦业务没有全部执行通过，出错点前面业务产生的数据要回滚掉。</p>
<h1 id="Good-Good-Study-Day-Day-Up"><a href="#Good-Good-Study-Day-Day-Up" class="headerlink" title="Good Good Study - Day Day Up !"></a>Good Good Study - Day Day Up !</h1><p>这里收集一些可以阅读的书籍、网站新闻和杂志，便于日后学习</p>
<ol>
<li><a target="_blank" rel="noopener" href="http://www.infoq.com/cn/architect/">InfoQ架构师月刊</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">蜀ICP备2021011057号-2 </a>
      <img src="/images/beian.png" alt=""><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=51019002002976" rel="noopener" target="_blank">川公网安备51019002002976号 </a>
  </div>

<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Atticus Lv</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  





</body>
</html>
